import java.util.*;import java.io.*; import static java.lang.Math.*; public class Rough {    static PrintWriter w=new PrintWriter(System.out);    static int dp[][]=new int[2501][2501];    public static void main(String[] args) {        Scanner sc=new Scanner(System.in);        int n=sc.nextInt(),m=sc.nextInt();        int arr1[][]=new int[n][m];        sc.nextLine();        for(int i=0;i<n;i++){            char arr[]=sc.nextLine().toCharArray();            for(int j=0;j<m;j++){                arr1[i][j]=arr[j]-'0';            }        }                for(int i=1;i<=n;i++){            for(int j=1;j<=m;j++){                dp[i][j]=(dp[i-1][j]+dp[i][j-1]-dp[i-1][j-1])+arr1[i-1][j-1];            }        }//        for(int i=1;i<=n;i++){//            for(int j=1;j<=m;j++){//                w.print(dp[i][j]+" ");//            }//            w.println();//        }        int res=Integer.MAX_VALUE;        for(int i=2;i<=Math.max(n,m);i++){            int ans=0;            for(int j=0;j<n;j+=i){                for(int k=0;k<m;k+=i){                    int ej=Math.min(n,j+i);                    int ek=Math.min(m,k+i);                    int on=dp[ej][ek]-dp[j][ek]-dp[ej][k]+dp[j][k];                    ans+=Math.min(on,i*i-on);                }            }            res=Math.min(res,ans);        }        w.println(res);        w.close();    }}
