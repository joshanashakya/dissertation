// practice with rainboyimport java.io.*;import java.util.*; public class CF425B extends PrintWriter {	CF425B() { super(System.out, true); }	Scanner sc = new Scanner(System.in);	public static void main(String[] $) {		CF425B o = new CF425B(); o.main(); o.flush();	} 	void main() {		int n = sc.nextInt();		int m = sc.nextInt();		int k = sc.nextInt();		int[][] aa = new int[n][m];		for (int i = 0; i < n; i++)			for (int j = 0; j < m; j++)				aa[i][j] = sc.nextInt();		int ans = k + 1;		if (m > k)			for (int j_ = 0; j_ < m; j_++) {				int sum = 0;				for (int j = 0; j < m; j++) {					int cnt = 0;					for (int i = 0; i < n; i++)						if (aa[i][j] != aa[i][j_])							cnt++;					sum += Math.min(cnt, n - cnt);				}				ans = Math.min(ans, sum);			}		else			for (int b = 0; b < 1 << m; b++) {				int sum = 0;				for (int i = 0; i < n; i++) {					int cnt = 0;					for (int j = 0; j < m; j++)						if ((aa[i][j] == 0) != ((b & 1 << j) == 0))							cnt++;					sum += Math.min(cnt, m - cnt);				}				ans = Math.min(ans, sum);			}		println(ans > k ? -1 : ans);	}}
