#!/usr/bin/python3.6# -*- coding: utf-8 -*-# @Time    : 2020/10/12 9:50 PM# @Author  : Songtao Li import itertools """1.没有"*"2.有"*"    1.仅有一个"*"    2.长度大于等于2        1."*"在最前        2."*"在最后        3."*"在中间""" if __name__ == "__main__":    good_alphabet = input()    pattern = input()    n = int(input())    test_data = [input() for i in range(n)]    pattern_except_star = pattern.replace("*", "")     if "*" not in pattern:        for data in test_data:            flag = True            if len(data) == len(pattern):                for i, j in zip(data, pattern):                    if j != "?":                        if i != j:                            flag = False                            break                    else:                        if i not in good_alphabet:                            flag = False                            break            else:                flag = False             if flag:                print("YES")            else:                print("NO")    else:        if len(pattern) == 1:            for data in test_data:                flag = True                for i in data:                    if i in good_alphabet:                        flag = False                        break                if flag:                    print("YES")                else:                    print("NO")        else:            if pattern[0] == "*":                good_part_len = len(pattern_except_star)                for data in test_data:                    flag = True                    if len(data[-good_part_len:]) == len(pattern_except_star):                        for i, j in zip(data[-good_part_len:], pattern_except_star):                            if j != "?":                                if i != j:                                    flag = False                                    break                            else:                                if i not in good_alphabet:                                    flag = False                                    break                        for i in data[:-good_part_len]:                            if i in good_alphabet:                                flag = False                    else:                        flag = False                    if flag:                        print("YES")                    else:                        print("NO")             elif pattern[-1] == "*":                good_part_len = len(pattern_except_star)                for data in test_data:                    flag = True                    if len(data[:good_part_len]) == len(pattern_except_star):                        for i, j in zip(data[:good_part_len], pattern_except_star):                            if j != "?":                                if i != j:                                    flag = False                                    break                            else:                                if i not in good_alphabet:                                    flag = False                                    break                        for i in data[good_part_len:]:                            if i in good_alphabet:                                flag = False                    else:                        flag = False                    if flag:                        print("YES")                    else:                        print("NO")             else:                star_index = pattern.find("*")                last_part = len(pattern) - 1 - star_index                for data in test_data:                    flag = True                    if len(data) < len(pattern_except_star):                        flag = False                    else:                        except_star = data[:star_index] + data[-last_part:]                        if len(except_star) == len(pattern_except_star):                            for i, j in zip(except_star, pattern_except_star):                                if j != "?":                                    if i != j:                                        flag = False                                        break                                else:                                    if i not in good_alphabet:                                        flag = False                                        break                            for i in data[star_index:-last_part]:                                if i in good_alphabet:                                    flag = False                                    break                        else:                            flag = False                    if flag:                        print("YES")                    else:                        print("NO") 		 	         	 	 								 	 			
