from collections import deque n, m = map(int, input().split()) rail_network=[[0]*(n+1) for _ in range(n+1)] for _ in range(m):	u, v = map(int, input().split())	rail_network[u][v]=rail_network[v][u]=1 que=deque() dis=[-1]*(n+1)dis[1]=0 que.append(1) while que:	temp=que.popleft() 	for i in range(1, n+1):		if rail_network[temp][i]!=rail_network[1][n] and dis[i]==-1:			dis[i]=dis[temp]+1			que.append(i) print(dis[-1])
