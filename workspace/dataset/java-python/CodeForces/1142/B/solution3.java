/* ID: tommatt1 LANG: JAVA TASK: */import java.util.*;import java.io.*;public class cf1142b{ 	public static void main(String[] args)throws IOException {		BufferedReader bf=new BufferedReader(new InputStreamReader(System.in));		PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(System.out)));		//BufferedReader bf=new BufferedReader(new FileReader("cf1142b.in"));		//PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("cf1142b.out")));		StringTokenizer st=new StringTokenizer(bf.readLine());		int n=Integer.parseInt(st.nextToken());		int m=Integer.parseInt(st.nextToken());		int q=Integer.parseInt(st.nextToken());		int[] p=new int[n+1];		int[] a=new int[m+1];		int[] min=new int[m+1];		int[] lst=new int[n+1];		int[] prev=new int[n+1];		int[][] par=new int[m+1][18];		st=new StringTokenizer(bf.readLine());		for(int i=1;i<=n;i++) {			p[i]=Integer.parseInt(st.nextToken());			prev[p[i]]=p[i-1];		}		prev[p[1]]=p[n];		st=new StringTokenizer(bf.readLine());		for(int i=1;i<=m;i++) {			a[i]=Integer.parseInt(st.nextToken());			lst[a[i]]=i;			par[i][0]=lst[prev[a[i]]];			min[i]=(int)2e5+5;			for(int j=1;j<=17;j++) {				par[i][j]=par[par[i][j-1]][j-1];			}			int z=i;			for(int j=0;j<=17;j++) {				if((n-1>>j&1)>0) z=par[z][j];			}			min[z]=Math.min(min[z], i);		}		for(int i=m-1;i>=1;i--) {			min[i]=Math.min(min[i], min[i+1]);		}		for(int i=0;i<q;i++) {			st=new StringTokenizer(bf.readLine());			int a1=Integer.parseInt(st.nextToken());			int a2=Integer.parseInt(st.nextToken());			if(min[a1]<=a2) out.print(1);			else out.print(0);		}		out.println("");		out.close();	} }  
