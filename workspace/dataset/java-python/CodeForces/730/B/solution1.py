from collections import defaultdictfor ik in range(int(input())):    n=int(input())    d=defaultdict(str)    if n==1:        print("! 1 1",flush=True)        continue    elif n==2:        print("? 1 2",flush=True)        s=input()        if s==">":            print("! 2 1",flush=True)        else:            print("! 1 2",flush=True)        continue    last=[i for i in range(1,n+1)]    res=[]    while(len(last)!=1):        for i in range(len(last)//2):            print("?", last[2*i], last[2*i+1], flush=True)            r=input()            d[(last[2 * i], last[2 * i + 1])] = r            if r=='>':                res.append(last[2*i])            else:                res.append(last[2*i+1])        if len(last)%2==1:            res.append(last[-1])        last=res+[]        res=[]    max=last[0]    #print(max)    last = [i for i in range(1, n+1)]    res = []    while (len(last) != 1):        for i in range(len(last)// 2):            if (last[2*i],last[2*i+1]) in d:                r1=d[(last[2*i],last[2*i+1])]            else:                print("?", last[2 * i], last[2 * i + 1], flush=True)                r1 = input()            if r1 == '<':                res.append(last[2 * i])            else:                res.append(last[2 * i + 1])        if len(last) % 2 == 1:            res.append(last[-1])        last = res + []        res = []    min = last[0]    print('!',min,max,flush=True)
