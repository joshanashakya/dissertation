import java.util.Scanner; public class BracketSequence { 	public static void main(String[] args) 	{		Scanner sc = new Scanner(System.in);		String s = sc.next();				boolean debug = false;				int depth = 0; //(		int[] checkpoint = new int[100001];		int[] depthscore = new int[100001];		int[] dsrun = new int[100001];		boolean[] depthtype = new boolean[100001]; //false: (				int best = 0;		int scr = 0;		int run = 0;				int beststart = -1;		int bestend = -1;		int bestsafe = -1;		int cpm = 0;				for(int i = 0; i < s.length(); i++)		{			char c = s.charAt(i);									if(c == '(')			{				depthtype[depth] = false;				depthscore[depth] = scr;				dsrun[depth] = run;				scr = 0;				checkpoint[depth] = i;//				System.out.println("Set checkpoint for depth " + depth);				depth++;			}			else if(c == '[')			{				depthtype[depth] = true;				depthscore[depth] = scr;				dsrun[depth] = run;				scr = 0;				checkpoint[depth] = i;//				System.out.println("Set checkpoint for depth " + depth);				depth++;			}			else if(c == ')')			{				depth--;				if(depth >= 0 && depthtype[depth] == false)				{					if(dsrun[depth] == run)					{//						System.out.println("Take out loan " + depthscore[depth]);						scr += depthscore[depth];						depthscore[depth] = 0;												if(scr > best)						{//							System.out.println(i + " new best " + scr);							best = scr;							bestend = i;														if(depth-1 >= 0)								beststart = checkpoint[depth-1]+1;							else								beststart = cpm;						}											}									}				else				{ //mismatch or excess					run++;					depth = 0;					scr = 0;					cpm = i+1;				}			}			else if(c == ']')			{				depth--;				if(depth >= 0 && depthtype[depth] == true)				{					if(dsrun[depth] == run)					{//						System.out.println("Take out loan " + depthscore[depth]);						scr += depthscore[depth];						depthscore[depth] = 0;					}										scr++;					if(scr > best)					{						best = scr;						bestend = i;												if(depth-1 >= 0)							beststart = checkpoint[depth-1]+1;						else							beststart = cpm;					}				}				else				{ //mismatch or excess					run++;					depth = 0;					scr = 0;					cpm = i+1;				}			}					}				System.out.println(best);		if(best > 0)			System.out.println(s.substring(beststart, bestend+1));		else			System.out.println("");	} }
