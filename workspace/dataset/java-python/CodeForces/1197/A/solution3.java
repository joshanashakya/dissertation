import java.math.BigInteger;import java.util.*; public class Example {    public static void main(String[] args) {          Scanner sc = new Scanner(System.in);         int t = sc.nextInt();         while (t > 0) {       int n= sc.nextInt();       int[]  arr= new  int[n];       for(int i=0;i<n;i++)       {           arr[i]=sc.nextInt();        }         if(arr.length<3)       {           System.out.println(0);       }else       {           int index=0;           int max=0;           for(int i=0;i<n;i++)           {               if(arr[i]>max)               {                   max=arr[i];                   index=i;               }            }           arr[index]=0;           index=0;            max=0;           for(int i=0;i<n;i++)           {               if(arr[i]>max)               {                   max=arr[i];                }            }             int setps=n-2;           if(setps+1<=max)           {               System.out.println(setps);           }           else           {               System.out.println(max-1);           }       }       t--;         }      }}     		 	  					  		  	 				 	   	
