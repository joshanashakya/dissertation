# https://codeforces.com/problemset/problem/1197/A t = int(input()) for _ in range(t):    n = int(input())     max_a = -float("inf")    max_b = -float("inf")    for l in map(int, input().split()):        if max_a == max_b:            if l > max_a:                max_a = l            elif l > max_b:                max_b = l        elif max_a > max_b and l > max_b:            max_b = l        elif max_b > max_a and l > max_a:            max_a = l     print(min(min(max_a, max_b) - 1, n - 2))
