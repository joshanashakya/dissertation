from heapq import *from collections import defaultdict, deque total = 0N, Q = map(int, input().split())q = deque()idx = 0vis = defaultdict(deque)total = 0not_valid = set()max_d = -1ans = []for _ in range(Q):    t, x = map(int, input().split())     if t == 1:        q.append((idx, x))        vis[x].append(idx)        idx += 1        total += 1     elif t == 2:        while vis[x]:            i = vis[x].pop()            not_valid.add(i)            if i <= max_d:                continue            total -= 1     else:        while q and (q[0][0] <= x - 1 or q[0][0] in not_valid):            j, y = q.popleft()            if j not in not_valid:                total -= 1                 if len(vis[y]):                    vis[y].popleft()         max_d = max(max_d, x - 1)     ans.append(str(total))print("\n".join(ans))
