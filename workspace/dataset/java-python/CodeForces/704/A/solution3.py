from heapq import *from collections import defaultdict, deque total = 0N, Q = map(int, input().split())q = deque()idx = 0total = 0A = [0] * NB = [0] * Nans = []for _ in range(Q):    t, x = map(int, input().split())    x -= 1     if t == 1:        q.append(x)        A[x] += 1        B[x] += 1        total += 1     elif t == 2:        total -= A[x]        A[x] = 0     else:        while idx <= x:            idx += 1            y = q.popleft()            B[y] -= 1             if B[y] < A[y]:                total -= 1                A[y] = B[y]     ans.append(str(total)) print('\n'.join(ans)) 
