import java.io.File;import java.util.LinkedList;import java.util.Scanner;import java.util.StringTokenizer;import java.util.TreeSet;Â public class p011 {	public static void main(String args[]) throws Exception {		StringTokenizer stok = new StringTokenizer(new Scanner(System.in).useDelimiter("\\A").next());		StringBuilder sb = new StringBuilder();		int n = Integer.parseInt(stok.nextToken());		int q = Integer.parseInt(stok.nextToken());		LinkedList<int[]> lst = new LinkedList<int[]>();		TreeSet<int[]> st = new TreeSet<int[]>(				(x,y)->x[0]==y[0]?Integer.compare(x[1], y[1]):Integer.compare(x[0], y[0]));		int ur = 0,msg=0;		for(int i=0;i<q;i++) {			int id = Integer.parseInt(stok.nextToken());			int x = Integer.parseInt(stok.nextToken());			if(id==1) {				ur++;msg++;				int[] a = new int[] {x,msg,0};				lst.addLast(a);				st.add(a);				sb.append(ur+"\n");			}			else if(id==2) {				int[] a = new int[] {x,-1,0};				int[] c = st.higher(a);				while(c!=null && c[0]==x) {					if(c[2]==0) {ur--;c[2]=1;}					st.remove(c);					c = st.higher(a);				}				sb.append(ur+"\n");			}			else {				while(!lst.isEmpty()) {					int[] a = lst.getFirst();					if(a[1]>x) break;					if(a[2]==0) {ur--;a[2]=1;}					lst.pollFirst();				}				sb.append(ur+"\n");			}					}		System.out.println(sb);	}}
