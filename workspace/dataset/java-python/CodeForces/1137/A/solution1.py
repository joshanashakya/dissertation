from bisect import bisect_leftimport sysinput = sys.stdin.buffer.readline n, m = map(int, input().split())a = [list(map(int, input().split())) for i in range(n)]  yoko_less = [[0] * m for i in range(n)]yoko_more = [[0] * m for i in range(n)]for i in range(n):    yoko = sorted(set(a[i]))    for j in range(m):        idx = bisect_left(yoko, a[i][j])        yoko_less[i][j] = idx        yoko_more[i][j] = len(yoko) - idx - 1 tate_less = [[0] * m for i in range(n)]tate_more = [[0] * m for i in range(n)]for j in range(m):    tate = sorted(set([a[i][j] for i in range(n)]))    for i in range(n):        idx = bisect_left(tate, a[i][j])        tate_less[i][j] = idx        tate_more[i][j] = len(tate) - idx - 1        ans = [[0] * m for i in range(n)]for i in range(n):    for j in range(m):        less = max(yoko_less[i][j], tate_less[i][j])        more = max(yoko_more[i][j], tate_more[i][j])        ans[i][j] = 1 + more + less for res in ans:    print(*res)
