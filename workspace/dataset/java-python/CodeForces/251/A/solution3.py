 # n, d = map(int, input().split())# li = [int(x) for x in input().split()]# i, j, ans = 0, len(li) - 1, 0# while i < len(li) and i + 1 < j:#     count = 0#     if li[j] - li[i] <= d:#         count = j - i#         i += 1#         ans += (count * (count - 1) // 2)#     else:#         j -= 1# print(ans)  n, d = map(int, input().split())ar = list(map(int, input().split())) i, j, s = 0, 0, 0 while i < n:    while ar[i] - ar[j] > d:        j += 1    N = i - j    s += N * (N - 1) // 2  # nC2 - pairing the elememts with i in the gap from i to j.     i += 1print(s)
