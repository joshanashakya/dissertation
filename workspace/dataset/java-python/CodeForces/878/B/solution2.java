import java.io.OutputStream;import java.io.IOException;import java.io.InputStream;import java.io.PrintWriter;import java.util.Scanner; /** * Built using CHelper plug-in * Actual solution is at the top * * @author Swatantra */public class Main {    public static void main(String[] args) {        InputStream inputStream = System.in;        OutputStream outputStream = System.out;        Scanner in = new Scanner(inputStream);        PrintWriter out = new PrintWriter(outputStream);        TaskB solver = new TaskB();        solver.solve(1, in, out);        out.close();    }     static class TaskB {        public void solve(int testNumber, Scanner in, PrintWriter out) {            int n = in.nextInt();            long k = in.nextLong();            long m = in.nextLong();            long ans = 1l * m * n;            //out.println("ans="+ans);            int i;            int count = 0;            int sta[] = new int[n];            int stb[] = new int[n];            for (i = 0; i < n; i++) {                int x = in.nextInt();                if (count > 0 && sta[count - 1] == x) {                    stb[count - 1]++;                    if (stb[count - 1] == k) {                        ans -= 1l * m * k;                        //out.println("In 1 ans="+ans);                        count--;                    }                } else {                    sta[count] = x;                    stb[count] = 1;                    count++;                }            }            int l = 0;            int r = count - 1;            while (r > l && sta[r] == sta[l]) {                long total = stb[l] + stb[r];                //if(total>=k) {                ans -= (m - 1) * (total / k) * k;                //out.println("In 2 ans="+ans);                if (total % k == 0) {                    l++;                    r--;                } else                    break;                //}            }            if (l == r) {                long total = stb[l] * m;                ans -= (total / k) * k;                //out.println("In 3 ans="+ans);                //out.println("In 3 ans="+ans);                if (total % k == 0) {                    l--;                    r++;                    while (l >= 0 && sta[l] == sta[r]) {                        long total2 = stb[l] + stb[r];                        if (total2 >= k) {                            ans -= (total2 / k) * k;                            //out.println("In 4 ans="+ans);                            if (total2 % k == 0) {                                l--;                                r++;                            } else                                break;                        }                     }                }            }            out.println(ans);        }     }} 
