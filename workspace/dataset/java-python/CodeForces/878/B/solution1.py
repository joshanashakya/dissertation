//George1123#include <bits/stdc++.h>using namespace std; typedef long long i64;typedef unsigned int u32;typedef unsigned long long u64;typedef vector<int> vi;typedef pair<int,int> pii; #define x first#define y second#define sz(a) (int)((a).size())#define all(a) (a).begin(),(a).end()#define R(i,n) for(int i=0;i<(n);++i)#define L(i,n) for(int i=(n)-1;i>=0;--i) constexpr int inf32=0x3f3f3f3f;constexpr i64 inf64=0x3f3f3f3f3f3f3f3f; int main(){    ios::sync_with_stdio(false);    cin.tie(0),cout.tie(0);     int n,k,m;    cin>>n>>k>>m;    i64 res=1ll*n*m;    vector<pii> a;    R(i,n){        int x;        cin>>x;        if(sz(a)&&a.back().x==x){            ++a.back().y;            if(a.back().y==k){                a.pop_back();                res-=1ll*m*k;            }        } else a.emplace_back(x,1);    }    n=sz(a);    if(n==1){        cout<<1ll*a[0].y*m%k<<'\n';        return 0;    }    R(i,n/2){        if(a[i].x!=a[n-1-i].x)            return !(cout<<res<<'\n');        int sum=a[i].y+a[n-1-i].y;        res-=1ll*sum/k*k*(m-1),sum%=k;        if(sum) return !(cout<<res<<'\n');    }    if(1ll*a[n/2].y*m%k==0) res=0;    else res-=1ll*m*a[n/2].y/k*k;    cout<<res<<'\n';     return 0;} /* stuff you should look for	* int overflow, array bounds	* special cases (n=1?)	* do smth instead of nothing and stay organized	* WRITE STUFF DOWN	* DON'T GET STUCK ON ONE APPROACH*/
