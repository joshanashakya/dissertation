n = int(input())s = list(map(int,input().split(' ')))a = []for i in range(max(s)):    a.append([])    for i in range(len(s)):    a[s[i]-1].append(i)a = list(filter(lambda x: x != [], a))if len(a) > 1:    for i in range(1,len(a)):        if len(a[i]) > 1:            s = a[i-1][-1]            if s > a[i][0] and s < a[i][-1]:                for j in range(1,len(a[i])):                    if s < a[i][j]:                        a[i] = a[i][j:] + a[i][:j]                        breakt = []for i in a:    t += ic = 0x = t[0] + 1i = n-1while i > 0:    if t[i] < t[i-1]:        k = t[i] - t[i-1] + n    else:        k = t[i] - t[i-1]    c += k    x -= c//n     i -= 1print(c+x)    
