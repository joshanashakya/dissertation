import java.util.Scanner;  public class Main {    public static void main(String[] args) {        Scanner input = new Scanner(System.in);        int n = input.nextInt();        int m = input.nextInt();        String[] s = new String[n];        int alreadyBlack=0;        for (int i = 0; i < n; i++) {            s[i] = input.next();                    }                int maxx = 0;        int minx =Integer.MAX_VALUE;        int maxy =0;        int miny = Integer.MAX_VALUE;        for (int i = 0; i < n; i++) {            for (int j = 0; j < m; j++) {                if(s[i].charAt(j)=='B')                {                    alreadyBlack++;                    maxx = Math.max(maxx, i);                    maxy =Math.max(maxy,j);                    minx = Math.min(minx, i);                    miny = Math.min(miny, j);                }            }        }                        int lenx = maxx-minx+1;        int leny = maxy-miny+1;       int len = Math.max(lenx,leny);                           if(alreadyBlack==0)        {                        System.out.println("1");        }        else if(len>n ||len>m)        {                                   System.out.println("-1");        }        else if(Math.sqrt(len*len)!=len)        {            System.out.println("-1");        }                            else        {                       System.out.println(len*len-alreadyBlack);        }        }    } 
