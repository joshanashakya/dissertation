a,b=map(int,input().split())l,r=b,-1d,u=a,-1z=[];ok=1for i in range(a):    k=input();z.append(k)    for j in range(b):        if "B" in k:ok=0;l=min(l,k.find('B'));r=max(r,k.rfind('B'));d=min(d,i);u=max(u,i)if ok:print(1)else:    h=u-d+1;w=r-l+1    dim=max(h,w)    if dim>min(a,b):print(-1)    else:        s=(dim-min(h,w))*dim        for i in range(d,u+1):            for j in range(l,r+1):s+=0+(z[i][j]=='W')        print(s)
