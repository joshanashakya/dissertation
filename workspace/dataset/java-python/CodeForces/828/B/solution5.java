import java.util.Scanner; public class B828 {     public static void main(String[] args) {        Scanner in = new Scanner(System.in);        int R = in.nextInt();        int C = in.nextInt();        char[][] A = new char[R][];        for (int r=0; r<R; r++) {            A[r] = in.next().toCharArray();        }        int minR = Integer.MAX_VALUE;        int maxR = Integer.MIN_VALUE;        int minC = Integer.MAX_VALUE;        int maxC = Integer.MIN_VALUE;        int count = 0;        for (int r=0; r<R; r++) {            for (int c=0; c<C; c++) {                if (A[r][c] == 'B') {                    count++;                    minR = Math.min(minR, r);                    maxR = Math.max(maxR, r);                    minC = Math.min(minC, c);                    maxC = Math.max(maxC, c);                }            }        }        int answer;        if (count == 0) {            answer = 1;        } else {            int side = Math.max(maxR-minR+1, maxC-minC+1);            if (side > R || side > C) {                answer = -1;            } else {                answer = side*side-count;            }        }        System.out.println(answer);    } }
