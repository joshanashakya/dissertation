n,m=map(int,input().split())sheet=[]for r in range(n):    ir=list(input().strip())    sheet.append(ir)minx,miny,maxx,maxy=101,101,-1,-1seen=Falsefor r in range(n):    for c in range(m):        if(sheet[r][c]=='B'):            if(minx>c):                minx=c            if(maxx<c):                maxx=c            if(miny>r):                miny=r            if(maxy<r):                maxy=r            seen=Truelength=max(maxy-miny+1,maxx-minx+1)if(seen==False):    print(1)elif(length > m or length > n):    print(-1)else:    counter=0    for i in range(miny,maxy+1):        for l in range(minx,maxx+1):            if(sheet[i][l]=='B'):                counter+=1    print((length*length)-counter)
