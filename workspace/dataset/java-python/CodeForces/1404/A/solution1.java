import java.util.*;public class BalancedBitString { 	public static void main(String[] args) {		// TODO Auto-generated method stub 		Scanner sc = new Scanner(System.in);		int t = sc.nextInt();		while (t-- > 0) {			int n = sc.nextInt();			int k = sc.nextInt();			sc.nextLine();			char[] arr = sc.nextLine().toCharArray();			boolean[] on = new boolean[k];			boolean[] off = new boolean[k];			for (int i = 0; i < n; i++) { 				if (arr[i] == '1') {					on[i % k] = true;				} else if(arr[i]=='0') {					off[i % k] = true;				}			}			boolean flag = true;			int c1 = 0, c0 = 0;			for (int i = 0; i < k; i++) {				if (on[i] && off[i]) {					flag = false;				}				if (on[i]) {					c1++;				} else if (off[i]) {					c0++;				}			}			if (c1 > k / 2 || c0 > k / 2)				flag = false;			System.out.println(flag ? "YES" : "NO"); 		} 	} }
