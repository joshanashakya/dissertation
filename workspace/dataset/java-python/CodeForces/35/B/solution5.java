import java.io.BufferedReader;import java.io.FileNotFoundException;import java.io.FileReader;import java.io.FileWriter;import java.io.IOException;import java.io.InputStream;import java.io.InputStreamReader;import java.io.PrintWriter;import java.util.StringTokenizer; public class A { 	public static void main(String[] args) throws IOException { 		Scanner sc = new Scanner("input.txt");		PrintWriter out = new PrintWriter(new FileWriter("output.txt"));//		Scanner sc = new Scanner(System.in);//		PrintWriter out = new PrintWriter(System.out); 		int n = sc.nextInt(), m = sc.nextInt(), k = sc.nextInt();		String[][] grid = new String[n][m];		while(k-->0)			if(sc.next().equals("+1"))			{				int x = sc.nextInt() - 1, y = sc.nextInt() - 1;				String id = sc.next();				while(x < n)					if(y == m) { y = 0; ++x; }					else if(grid[x][y] != null)						++y;					else					{						grid[x][y] = id;						break;					}									}			else			{				String id = sc.next();				int ix = -1, iy = -1;				loop: for(int x = 0; x < n; ++x)					for(int y = 0; y < m; ++y)						if(grid[x][y] != null && grid[x][y].equals(id)) 						{							ix = x + 1;							iy = y + 1;							grid[x][y] = null;							break loop;						}				out.println(ix + " " + iy);			}		out.close();	}	 	static class Scanner 	{		StringTokenizer st;		BufferedReader br; 		public Scanner(InputStream s){	br = new BufferedReader(new InputStreamReader(s));}				public Scanner(String s) throws FileNotFoundException{	br = new BufferedReader(new FileReader(s));} 		public String next() throws IOException 		{			while (st == null || !st.hasMoreTokens()) 				st = new StringTokenizer(br.readLine());			return st.nextToken();		} 		public int nextInt() throws IOException {return Integer.parseInt(next());} 		public long nextLong() throws IOException {return Long.parseLong(next());} 		public String nextLine() throws IOException {return br.readLine();} 		public double nextDouble() throws IOException { return Double.parseDouble(next()); } 		public boolean ready() throws IOException {return br.ready();} 	}}
