import java.util.*;public class ChessCheater { 	public static void main(String[] args) {		// TODO Auto-generated method stub		Scanner sc=new Scanner(System.in);		int t=sc.nextInt();		while(t-->0) {			int n=sc.nextInt();			int k=sc.nextInt();			sc.nextLine();			char[]arr=sc.nextLine().toCharArray();			int f=0,l=0;			for(int i=0;i<n;i++) {				if(arr[i]!='L') {					break;				}				f++;			}			for(int j=n-1;j>=0;j--) {				if(arr[j]!='L') {					break;				}				l++;			}			if(f==n) {				System.out.println(k>0 ? 2*k-1:0);			}else {			int c=0;			List<Integer>res=new ArrayList<>();			for(int i=f+1;i<n;i++) {				if(arr[i]=='W' && c!=0) {					res.add(c);					c=0;				}else if(arr[i]=='L') {					c++;				}			}			long count=(arr[0]=='W')?1:0;			for(int i=1;i<n;i++) {				if(arr[i]=='W') {					if(arr[i-1]=='W') {						count+=2;					}					else {						count++;					}				}			}						Collections.sort(res);			for(int val:res) {				if(val<=k) {					count+=2*val+1;					k=k-val;				}else {					count+=2*k;					k=0;				}			}						if(k>0) {				if(f<=k) {					k=k-f;					count+=2*f;				}else {					count+=2*k;					k=0;				}				if(k>0) {					if(l<=k) {						k=k-l;						count+=2*l;					}else {						count+=2*k;						k=0;					}				}			}			System.out.println(count);						}					} 	} }
