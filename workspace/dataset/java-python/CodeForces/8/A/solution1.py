actual = input()memorized1 = input()memorized2 = input() index1 = actual.find(memorized1)index2 = actual.find(memorized2, index1 + len(memorized1))index3 = actual[::-1].find(memorized1)index4 = actual[::-1].find(memorized2, index3 + len(memorized1)) # print(index1, index2, index3, index4) maybe_ans = ""if (index1 == -1 or index2 == -1) and (index3 == -1 or index4 == -1):    maybe_ans = "fantasy"elif index1 < index2 and index3 < index4:    maybe_ans = "both"elif index1 < index2:    maybe_ans = "forward"elif index3 < index4:    maybe_ans = "backward"else:    maybe_ans = "fantasy" print(maybe_ans)
