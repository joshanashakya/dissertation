import java.io.*; public class Main {    static String str, str1, str2;    static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));    static BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(System.out));     public static void main(String[] args) throws IOException {        //        br = new BufferedReader(new InputStreamReader(new FileInputStream("/Users/huangweixuan/testdata.txt")));        str = br.readLine();        str1 = br.readLine();        str2 = br.readLine();        int i = 0, j = 0;        String flag = "fantasy";        while (i < str.length()) {            j = 0;            while (j < str1.length() && i < str.length() - j && str.charAt(i + j) == str1.charAt(j)) {                ++j;            }            if (j == str1.length()) {                i += j;                break;            }            ++i;        }        while (i < str.length()) {            j = 0;            while (j < str2.length() && i < str.length() - j && str.charAt(i + j) == str2.charAt(j)) {                ++j;            }            if (j == str2.length()) {                flag = "forward";                break;            }            ++i;        }        i = 0;        j = 0;        StringBuilder br = new StringBuilder();        for (i = str.length() - 1; i > -1; --i) {            br.append(str.charAt(i));        }        str = br.toString();        i = 0;        while (i < str.length()) {            j = 0;            while (j < str1.length() && i < str.length() - j && str.charAt(i + j) == str1.charAt(j)) {                ++j;            }            if (j == str1.length()) {                i += j;                break;            }            ++i;        }        while (i < str.length()) {            j = 0;            while (j < str2.length() && i < str.length() - j && str.charAt(i + j) == str2.charAt(j)) {                ++j;            }            if (j == str2.length()) {                if (flag.equals("forward")) {                    flag = "both";                } else {                    flag = "backward";                }                break;            }            ++i;        }        bw.write(flag);        bw.close();    }}
