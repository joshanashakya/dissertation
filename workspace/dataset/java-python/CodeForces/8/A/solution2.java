import java.io.*;import java.util.*;import java.lang.*;public class Test { 	public static void main(String[] args) throws IOException {		// TODO Auto-generated method stub		//BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); 	    //String s = br.readLine();		Scanner res = new Scanner(System.in);	    //char[] y=new char[100001];		String ok = res.nextLine();		String okk=ok;				ok=res.nextLine();		String okkk =ok;		ok=res.nextLine();		String okkkk =ok;		int i= okk.indexOf(okkk);		int j=okk.indexOf(okkkk,i+okkk.length());		//System.out.println(okkk.length());		//System.out.println(i);		//System.out.println(j);		StringBuilder sb = new StringBuilder();		sb.append(okk);		sb = sb.reverse();		String olk = sb.toString();		int k=olk.indexOf(okkk);		int l=olk.indexOf(okkkk,k+okkk.length());		//System.out.println(k);		//System.out.println(l);		if(i>-1 && j>-1 &&(k==-1 || l==-1)) {			System.out.println("forward");					}		else if(k>-1&&l>-1&&(i==-1 || j==-1)) {			System.out.println("backward");		}		else if(i>-1&&j>-1 && k>-1 && l>-1) {			System.out.println("both");		}		else if(k==-1 && l==-1 && i==-1 && j==-1) {			System.out.println("fantasy");		}				else {			System.out.println("fantasy");		}			    	} }
