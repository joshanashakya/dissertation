def main():    s,a,b=input(),input(),input()    sh=pi=False    la,ls,lb=len(a),len(s),len(b)    fi=s.find(a)    if fi!=-1:        if ls-(fi+la)>=lb and s.find(b,fi+la)!=-1: sh=True    s=''.join(reversed(s))    fi=s.find(a)    if fi!=-1:        if ls-(fi+la)>=lb and s.find(b,fi+la)!=-1: pi=True    if sh!=True and pi!=True: print('fantasy')    elif sh==True and pi==True: print('both')    elif sh==True: print('forward')    elif pi==True: print('backward')if __name__=='__main__':    main()
