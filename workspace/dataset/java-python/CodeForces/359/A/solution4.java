import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;import java.util.*;import java.util.StringTokenizer;public class Main{static class FastReader{BufferedReader br;StringTokenizer st;public FastReader(){br = new BufferedReader(newInputStreamReader(System.in));}String next(){while (st == null || !st.hasMoreElements()){try{st = new StringTokenizer(br.readLine());}catch (IOException e){e.printStackTrace();}}return st.nextToken();}int nextInt(){return Integer.parseInt(next());}long nextLong(){return Long.parseLong(next());}double nextDouble(){return Double.parseDouble(next());}String nextLine(){String str = "";try{str = br.readLine();}catch (IOException e){e.printStackTrace();}return str;}} public static void main(String[] args){FastReader fs=new FastReader();int r = fs.nextInt();int c = fs.nextInt();int[][] a = new int[r][c];boolean first = false; for(int i=0;i<r;i++){    for(int j=0;j<c;j++)    {        a[i][j] = fs.nextInt();        if((i==0 || i==r-1 || j==0 || j==c-1) && (a[i][j]==1))        {            first = true;        }    }}if(first){    System.out.println(2);}else{    System.out.println(4);} }}
