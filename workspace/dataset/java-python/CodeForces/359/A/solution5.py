try:    n,m=map(int,input().split())    f=[]    flag=0    for i in range(n):        k=[int(j) for j in input().split()]        f.append(k)                if(1 in f[0]):        flag=1    for i in range(n):        if(f[i][0]==1):            flag=1    if(1 in f[n-1]):        flag=1    for i in range(n):        if(f[i][m-1]==1):            flag=1        if(flag==1):        print("2")    else:        print("4")except:    pass
