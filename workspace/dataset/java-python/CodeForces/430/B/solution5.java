import java.io.*;import java.util.*;public class Solution {	static Scanner sc=new Scanner(System.in);	static PrintWriter out=new PrintWriter(System.out);	//Main	public static void main(String args[]) {		int test=1;		//test=sc.nextInt();		while(test-->0) {			//Focus			int n=sc.nextInt(),k=sc.nextInt(),x=sc.nextInt(),a[]=new int[n],ans=0;			for(int i=0;i<n;i++) a[i]=sc.nextInt();			for(int i=0;i<n-1;i++) {				if(a[i]==x && a[i+1]==x) {					if(i-1<0 || i+2>=n) ans=Math.max(ans, 3);					else {						int cnt=2;						int l=i-1,r=i+2,c=a[l];						while(true) {							while(l>=0 && a[l]==c) l--;							while(r<n && a[r]==c) r++;							int val=r-l-cnt-1;							if(val<3) break;							cnt+=val;							if(l>=0)c=a[l];						}						ans=Math.max(ans, cnt);					}				}			}			out.println(ans);		}		out.flush();		out.close();	}}
