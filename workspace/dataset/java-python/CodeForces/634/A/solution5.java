import java.util.Scanner;;public class Main {//	class queue{//		int x;//		//	}	public static void main(String[]args) {		Scanner input=new Scanner(System.in);		int n = input.nextInt();		int [] a = new int [400100];//		int book=0;		int box =n;				for(int i=1;i<=box;i++) {						a[i]=input.nextInt();			if(a[i]==0) {//				a[i]=input.nextInt();				i--;				box--;							}					}		int b[]=new int[n+1];		int box2 =n;		for(int i=1;i<=box2;i++) {			b[i]=input.nextInt();			if(b[i]==0) {//				b[i]=input.nextInt();				i--;				box2--;				}		}		int head = 1;		int tail = n;				int target=2*n+1;		int hehe = 0;				while(tail<=target) {			int flag = 0;			for(int i=1;i<=n-1;i++) {//System.out.println("he"+a[head+i-1]+"ä¸Ž"+b[i]);				if(a[head+i-1]!=b[i]) {					a[tail]=a[head];					head++;					tail++;					flag=1;					break;				}			}			if(flag==0) {				hehe = 1;				System.out.println("YES");				break;			}		}		if(hehe==0) {			System.out.println("NO");		}	}}
