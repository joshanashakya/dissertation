import java.io.*;import java.util.*;import java.util.ArrayList; public class CodeForce  {		static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));	static StringBuilder sb = new StringBuilder(); 	static int next(String[] sr, int ind) {		if(sr[ind].equals("S")||sr[ind].equals("F"))			return 1000;		return Integer.parseInt(sr[ind]);	} 	public static void main(String[] args) throws IOException {		int n=Integer.parseInt(br.readLine());				int[] arr=new int[n];		int[] arr1=new int[n];				String[] sr=br.readLine().split(" ");				for(int i=0;i<n;i++)		{			arr[i]=next(sr,i);					}int k=arr[0];		if(k==0)			k=arr[1];		sr=br.readLine().split(" ");		int j=0;		for(int i=0;i<n;i++)		{			arr1[i]=next(sr,i);			if(arr1[i]==k)				j=i;									}						int i=0;		while(i<n)		{			j=j%n;						if(arr[i]==0)				i++;			if(arr1[j]==0)				{j++;	j=j%n;}			if(i<n)			{if(arr[i]!=arr1[j])			{				System.out.println("NO");				return;			}																			}			i++;j++;					}		System.out.println("YES");					}}
