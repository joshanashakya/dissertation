n = int(input())s1 = input().split()s2 = input().split() st1 = 0st2 = 0for i in range(n):    if s1[i] == '1':        st1 = i    if s2[i] == '1':        st2 = i i = (st1 + 1) % nj = (st2 + 1) % nf = Truesteps = 0while steps < n:    if s1[i] == '0':        i = (i + 1) % n    if s2[j] == '0':        j = (j + 1) % n    if s1[i] != s2[j]:        f = False        break    i = (i + 1) % n    j = (j + 1) % n    steps += 1 if f:    print('YES')else:    print('NO')
