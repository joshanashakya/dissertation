from sys import stdin, stdoutimport string n = int(input())cand = set(string.ascii_lowercase)ans = 0for i in range(n-1):    res, word = stdin.readline().split()    word = set(word)    if res == '!':        if len(cand) == 1:            ans += 1        cand = word & cand    elif res == '.':        cand = cand - word    elif res == '?':        if len(cand) == 1:            ans += 1        cand = cand - word print(ans)
