from sys import stdin, stdout n = int(input())cand = {chr(i) for i in range(ord('a'), ord('z') + 1)}ans = 0for i in range(n-1):    res, word = stdin.readline().split()    if res == '!':        if len(cand) == 1:            ans += 1        cand = set(word).intersection(cand)    elif res == '.':        cand = cand - set(word)    elif res == '?':        if len(cand) == 1:            ans += 1        cand = cand - set(word) print(ans) 
