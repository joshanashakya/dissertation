import java.util.Scanner; public class B172 {     public static void main(String[] args) {        Scanner in = new Scanner(System.in);        int A = in.nextInt();        int B = in.nextInt();        int M = in.nextInt();        int x = in.nextInt();        int[] seen = new int[M];        int index = 1;        while (seen[x] == 0) {            seen[x] = index;            index++;            x = (A*x+B)%M;        }        int answer = index - seen[x];        System.out.println(answer);    } }
