import java.io.*;import java.lang.*;import java.util.*;import java.io.*;import java.util.*;public class Main{	static Scanner scanner=new Scanner(System.in);	public static void main(String[] args) {		int t=scanner.nextInt();		while(t-->0) {			int n=scanner.nextInt();			int m=scanner.nextInt();			char c[][]=new char[n][m];			int [][]a=new int[n][m];//记录有几层			for(int i=0;i<n;i++) c[i]=scanner.next().toCharArray();			for(int i=0;i<n;i++) {				for(int j=0;j<m;j++) {					int x=0;//记录以该点为基点旁边有几个连续堆成点					for(int s=0;s<=(j<m-j?j:m-j);s++) {						if(j-s<0||j+s>=m)break;						if(c[i][j-s]=='*'&&c[i][j+s]=='*') {							x++;						}else {							break;						}					}					if(i>0)a[i][j]=Math.min(a[i-1][j]+1, x);					else a[i][j]=Math.min(1, x);				}			}			//for(int i=0;i<n;i++)System.out.println(Arrays.toString(a[i]));			long ans=0;			for(int i=0;i<n;i++) {				for(int j=0;j<m;j++) {					ans+=a[i][j];				}			}			System.out.println(ans);		}	}}	 	  	  			 	   	 	 		 			   		
