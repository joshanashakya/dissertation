import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;import java.io.PrintWriter;import java.util.ArrayList;import java.util.StringTokenizer; public class Main {    static ArrayList<Integer> adjList[];    static double ans[];    static int cnt[];     public static void main(String[] args) throws IOException {        Scanner sc = new Scanner();        PrintWriter out = new PrintWriter(System.out);        int n = sc.nextInt();        adjList = new ArrayList[n];        for (int i = 0; i < n; i++)            adjList[i] = new ArrayList<>();        for (int i = 1; i < n; i++)            adjList[sc.nextInt() - 1].add(i);        cnt = new int[n];        preprocess(0);        ans = new double[n];        dfs(0, 0);        for (double x : ans)            out.print(x + " ");        out.flush();        out.close();    }     static void dfs(int u, int p) {        if (u == 0) ans[u] = 1;        else ans[u] = ans[p] + 0.5 * (1 + cnt[p] - cnt[u]);        for (int v : adjList[u])            dfs(v, u);    }     static void preprocess(int u) {        cnt[u] = 1;        for (int v : adjList[u]) {            preprocess(v);            cnt[u] += cnt[v];        }    }     static class Scanner {        BufferedReader br;        StringTokenizer st;         Scanner() {            br = new BufferedReader(new InputStreamReader(System.in));        }         String next() throws IOException {            while (st == null || !st.hasMoreTokens())                st = new StringTokenizer(br.readLine());            return st.nextToken();        }         int nextInt() throws IOException {            return Integer.parseInt(next());        }    }}
