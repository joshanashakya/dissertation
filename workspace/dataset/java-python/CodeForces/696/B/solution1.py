# [https://gitlab.com/amirmd76/cf-round-362/-/blob/master/B/dans.py <- https://gitlab.com/amirmd76/cf-round-362/tree/master/B <- https://codeforces.com/blog/entry/46031 <- https://codeforces.com/problemset/problem/696/B <- https://algoprog.ru/material/pc696pB] n = int(input())if n > 1:    p = input().split(' ')else:    p = [] g = []ans = []sz = [] for i in range(0, n):	g.append([])	ans.append(0.0)	sz.append(0) for i in range(0, n - 1):	g[int(p[i]) - 1].append(i + 1) for i in range(0, n)[::-1]:	sz[i] = 1	for to in g[i]:		sz[i] += sz[to] for i in range(0, n):	for to in g[i]:		ans[to] = ans[i] + 1 + (sz[i] - 1 - sz[to]) * 0.5 print(' '.join([str(a + 1) for a in ans]))
