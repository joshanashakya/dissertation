#python 3.5.2 n,k = map(int, input().split())A = []B = []ans=0a = [[''] *12  for i in range(n)]for i in range (n):    a[i] = input()    for j in range(12):        if (a[i][j]=="."):            nsoo=0            if(j>0):                if(a[i][j-1]=="S"):                    nsoo+=1            if(j<11):                if(a[i][j+1]=="S"):                    nsoo+=1            A.append(nsoo)            B.append([i,j])        if(a[i][j]=="S"):            if(j>0):                if(a[i][j-1]=="S" or a[i][j-1]=="P"):                    ans+=1            if(j<11):                if(a[i][j+1]=="S" or a[i][j+1]=="P"):                    ans+=1cnt0=cnt1=cnt2=0 iin = [0]*len(A)for i in range (len(A)):    if(A[i]==0):        iin[i]=cnt0+1        cnt0+=1cnt1=cnt0for i in range (len(A)):    if(A[i]==1):        iin[i]=cnt1+1        cnt1+=1cnt2=cnt1for i in range (len(A)):    if(A[i]==2):        iin[i]=cnt2+1        cnt2+=1cnt=1for j in range(len(A)):    if(cnt-1==cnt0):        break    if(cnt-1==k):        break    if(iin[j]==cnt):        c = a[B[j][0]][0:B[j][1]] + 'x'         c = c+a[B[j][0]][B[j][1]+1:]        a[B[j][0]]=c        ans+=A[j]        cnt+=1for j in range(len(A)):    if (cnt-1==k):        break    if(cnt-1==cnt1):        break    if(iin[j]==cnt):        c = a[B[j][0]][0:B[j][1]] + 'x'         c = c+a[B[j][0]][B[j][1]+1:]        a[B[j][0]]=c        ans+=A[j]        cnt+=1for j in range(len(A)):    if(cnt-1==cnt2):        break    if(cnt-1==k):        break    if(iin[j]==cnt):        c = a[B[j][0]][0:B[j][1]] + 'x'         c = c+a[B[j][0]][B[j][1]+1:]        a[B[j][0]]=c        ans+=A[j]        cnt+=1print(ans)for i in range(n):    print(a[i])                                                      
