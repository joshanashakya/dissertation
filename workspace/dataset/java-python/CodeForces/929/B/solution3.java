import java.util.*;public class Olimpiada_B {	public static String replaceCharAt(String s, int j, char c) {		return s.substring(0, j) + c + s.substring(j+1);	}	public static void main(String[] args) {		Scanner sc = new Scanner(System.in);		int n = sc.nextInt(),k = sc.nextInt();		int count = 0;		String[] a = new String[n];		sc.nextLine();		for (int i=0; i<n;i++) {			a[i]="0"+sc.nextLine()+"0";		}		if (k>0) {			for (int i=0; i<n; i++) {				if (k==0) break;				for (int j = 1; j<a[i].length()-1; j++) {					if (k==0) break;					if ((a[i].charAt(j)=='.') && (a[i].charAt(j-1)!='S') && (a[i].charAt(j+1)!='S')) {						a[i]=replaceCharAt(a[i],j,'x');						k=k-1;					}				}			}		}			if (k>0)			{			for (int i=0; i<n; i++) {				if (k==0) break;				for (int j = 1; j<a[i].length()-1; j++) {					if (k==0) break;					if ((a[i].charAt(j)=='.') && (((a[i].charAt(j-1)=='S') && (a[i].charAt(j+1)!='S')) || ((a[i].charAt(j-1)!='S') && (a[i].charAt(j+1)=='S')))) {						a[i]=replaceCharAt(a[i],j,'x');						k=k-1;					}				}			}		}			if (k>0)			{			for (int i=0; i<n; i++) {				if (k==0) break;				for (int j = 1; j<a[i].length()-1; j++) {					if (k==0) break;					if ((a[i].charAt(j)=='.') && (a[i].charAt(j-1)=='S') && (a[i].charAt(j+1)=='S')) {						a[i]=replaceCharAt(a[i],j,'x');						k=k-1;					}				}			}		}		for (int i = 0; i<n; i++) {			for (int j = 1; j<a[i].length()-1; j++) {				if (a[i].charAt(j)=='S') {					if (a[i].charAt(j-1)=='P'||a[i].charAt(j-1)=='S' || a[i].charAt(j-1)=='x') {						count++;					}					if (a[i].charAt(j+1)=='P'||a[i].charAt(j+1)=='S' || a[i].charAt(j+1)=='x') {						count++;					}				}			}		}		System.out.println(count);		for (int i = 0; i<n; i++) {			System.out.println(a[i].replace('0', ' ').trim());		}	}}
