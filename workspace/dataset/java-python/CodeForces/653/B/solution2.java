import java.io.*;import java.math.BigInteger;import java.util.*;import static java.lang.Math.PI;import static java.lang.System.in;import static java.lang.System.out;import static java.lang.System.err; public class B {          public static boolean check(int idx, ArrayList<Integer> s, ArrayList<Pair> arr){        int n = s.size();        if(idx==n-1){            if(s.get(n-1)==0)  return true;            return false;        }        for(int i = 0; i < arr.size(); i++){            Pair cur = arr.get(i);            int one = s.get(idx);            int two = s.get(idx+1);                        if(cur.u==one && cur.v==two){                s.set(idx+1, cur.rep);                boolean thisOne = check(idx+1, s, arr);                if(thisOne) return true;                s.set(idx+1, two);            }        }        return false;    }    public static int generate(ArrayList<Integer> s, int n, ArrayList<Pair> arr){        if(n==0){            ArrayList<Integer> demo = new ArrayList<>();            for(int i = 0; i < s.size(); i++){                demo.add(s.get(i));            }            if(check(0, demo, arr))    return 1;            return 0;        }        int ans = 0;        for(int i = 0; i < 6; i++){            s.add(i);            ans += generate(s, n-1, arr);            s.remove(s.size()-1);        }        return ans;    }    public static void main(String[] args) throws Exception {           Foster sc = new Foster();        PrintWriter p = new PrintWriter(out);        int n = sc.nextInt();        int q = sc.nextInt();        if(n==2){            int count = 0;            while(q--!=0){                String u = sc.next(), v = sc.next();                if(v.equals("a"))   count++;            }            p.println(count);        }        else{            ArrayList<Pair> arr = new ArrayList<>();            while(q--!=0){                char u[] = sc.next().toCharArray();                char v = sc.next().charAt(0);                int uu = (int)(u[0]-'a');                int vv = (int)(u[1]-'a');                int rep = (int)(v-'a');                arr.add(new Pair(uu, vv, rep));            }            ArrayList<Integer> s = new ArrayList<>();            int ans = generate(s, n, arr);            p.println(ans);        }        p.close();    }     static class Pair{        int u,v,rep;        public Pair(int u, int v, int rep){            this.u = u;            this.v = v;            this.rep = rep;        }    }    static long[] sort(long a[]){        ArrayList<Long> arr = new ArrayList<>();        for(long i : a){            arr.add(i);        }        Collections.sort(arr);        for(int i = 0; i < arr.size(); i++){            a[i] = arr.get(i);        }        return a;    }    static int[] sort(int a[]){        ArrayList<Integer> arr = new ArrayList<>();        for(int i : a){            arr.add(i);        }        Collections.sort(arr);        Collections.reverse(arr);        for(int i = 0; i < arr.size(); i++){            a[i] = arr.get(i);        }        return a;    }    /* */    /*1. Check overflow in pow function or in general2. Check indices of read array function3. Think of an easier solution because the problems you solve are always easy4. Check iterator of loop5. If still doesn't work, then jump from the 729th floor 'coz "beta tumse na ho paayega"     Move to top!!*/    static class Foster {        BufferedReader br = new BufferedReader(new InputStreamReader(in));        StringTokenizer st = new StringTokenizer("");        String next() {            while (!st.hasMoreTokens())                try {                    st = new StringTokenizer(br.readLine());                }                 catch (IOException e) {                    e.printStackTrace();                }            return st.nextToken();        }        int nextInt() {            return Integer.parseInt(next());        }        long nextLong() {            return Long.parseLong(next());        }        double nextDouble() {            return Double.parseDouble(next());        }        int[] intArray(int n) {                   // Check indices            int arr[] = new int[n];            for(int i = 0; i < n; i++) {                arr[i] = nextInt();            }            return arr;        }        long[] longArray(int n) {                 // Check indices            long arr[] = new long[n];            for(int i = 0; i < n; i++) {                arr[i] = nextLong();            }            return arr;        }        int[] getBits(int n) {                   //in Reverse Order            int a[] = new int[31];            for(int i = 0; i < 31; i++) {                if(((1<<i) & n) != 0)                    a[i] = 1;            }            return a;        }        static String reverse(String s){            String temp = "";            for(int i = s.length()-1; i >= 0; i--){                temp += s.charAt(i);            }            return temp;        }        static long pow(long... a) {            long mod = Long.MAX_VALUE;            if(a.length == 3)   mod = a[2];            long res = 1;            while(a[1] > 0) {                if((a[1] & 1) == 1)                    res = (res * a[0]) % mod;                a[1] /= 2;                a[0] = (a[0] * a[0]) % mod;            }            return res;        }        static void print(Object... o) {            for(Object next : o) {                System.err.print(next + " ");            }        }        static void println(Object... o) {            for(Object next : o) {                System.err.print(next + " ");            }            System.err.println();        }        static void watch(Object...a) throws Exception {            int i = 1;            for (Object o: a) {                boolean found = false;                if (o.getClass().isArray()) {                    String type = o.getClass().getName().toString();                    switch (type) {                        case "[I": {                            int[] test = (int[]) o;                            println(i + " : " + Arrays.toString(test));                            break;                        }                        case "[[I": {                            int[][] obj = (int[][]) o;                            println(i + " : " + Arrays.deepToString(obj));                            break;                        }                        case "[J": {                            long[] obj = (long[]) o;                            println(i + " : " + Arrays.toString(obj));                            break;                        }                        case "[[J": {                            long[][] obj = (long[][]) o;                            println(i + " : " + Arrays.deepToString(obj));                            break;                        }                        case "[D": {                            double[] obj = (double[]) o;                            println(i + " : " + Arrays.toString(obj));                            break;                        }                        case "[[D": {                            double[][] obj = (double[][]) o;                            println(i + " : " + Arrays.deepToString(obj));                            break;                        }                        case "[Ljava.lang.String": {                            String[] obj = (String[]) o;                            println(i + " : " + Arrays.toString(obj));                            break;                        }                        case "[[Ljava.lang.String": {                            String[][] obj = (String[][]) o;                            println(i + " : " + Arrays.deepToString(obj));                            break;                        }                        case "[C": {                            char[] obj = (char[]) o;                            println(i + " : " + Arrays.toString(obj));                            break;                        }                        case "[[C": {                            char[][] obj = (char[][]) o;                            println(i + " : " + Arrays.deepToString(obj));                            break;                        }                        default: {                            println(i + " : type not identified");                            break;                        }                    }                    found = true;                }                if (o.getClass() == ArrayList.class) {                    println(i + " : LIST = " + o);                    found = true;                }                if (o.getClass() == TreeSet.class) {                    println(i + " : SET = " + o);                    found = true;                }                if (o.getClass() == TreeMap.class) {                    println(i + " : MAP = " + o);                    found = true;                }                if (o.getClass() == HashMap.class) {                    println(i + " : MAP = " + o);                    found = true;                }                if (o.getClass() == LinkedList.class) {                    println(i + " : LIST = " + o);                    found = true;                }                if (o.getClass() == PriorityQueue.class) {                    println(i + " : PQ = " + o);                    found = true;                }                if (!found) {                    println(i + " = " + o);                }                i++;            }        }    }}
