import java.util.*;import javafx.util.Pair; public class VisTrain {     public static Scanner in = new Scanner(System.in);     public static void main(String[] args) {        ArrayList<Pair<Integer, Integer>> list = new ArrayList<Pair<Integer, Integer>>();        HashSet<Integer> a = new HashSet<Integer>();        HashSet<Integer> b = new HashSet<Integer>();        int n = in.nextInt();        int m = in.nextInt();        boolean[] visited = new boolean[n + 1];        int maxA = -1;        int minB = Integer.MAX_VALUE;        int tmp = m;        while (tmp-- > 0) {            int u = in.nextInt();            int v = in.nextInt();            int min = Math.min(u, v);            int max = Math.max(u, v);            maxA = Math.max(maxA, min);            minB = Math.min(minB, max);            list.add(new Pair(min, max));            a.add(min);            b.add(max);            visited[u] = visited[v] = true;        }        if (m == 0) {            System.out.println(n - 1);        } else {            boolean ans = true;            for (Pair p : list) {                if ((a.contains(p.getKey()) && a.contains(p.getValue())) || (b.contains(p.getKey()) && b.contains(p.getValue()))) {                    ans = false;                    break;                }            }            if (ans && maxA < minB) {                int count = 0;                for (int i = maxA; i <= minB; i++) {                    if (!visited[i]) {                        count++;                    }                }                System.out.println(count + 1);            } else {                System.out.println("0");            }        }    } }
