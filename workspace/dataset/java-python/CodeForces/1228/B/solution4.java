import java.io.*;import java.math.*;import java.util.*;import java.io.BufferedReader;import java.io.InputStreamReader;import java.io.PrintWriter; public class RoughBackup { 	static Scanner scn = new Scanner(System.in); 	public static void main(String[] args) throws Exception {				int h = scn.nextInt();// r		int w = scn.nextInt();// c				int[] r = new int[h];		int[] c = new int[w]; 		for (int i = 0; i < h; i++) {			r[i] = scn.nextInt();		} 		for (int i = 0; i < w; i++) {			c[i] = scn.nextInt();		} 		long ans = FillingGrid(r, c);		System.out.println(ans); 	} 	private static long FillingGrid(int[] r, int[] c) {		int M = 1000000007;		int count = 0;		boolean flag = true;		for (int i = 0; i < r.length; i++) {			for (int j = 0; j < c.length; j++) { 				if ((c[j] == i && r[i] > j) || (r[i] == j && c[j] > i)) {					flag = false;					break;				} 				if (i > c[j] && j > r[i]) {					count++;				} 			}		} 		if (!flag) {			return 0;		} 		long ans = 1;		for (int i = 0; i < count; i++) {			 ans = ( (ans % M) + (ans % M) ) % M;		}		return (long)ans%M; 	}}
