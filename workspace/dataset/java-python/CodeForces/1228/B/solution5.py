def solve():    # Get input    h, w = [int(z) for z in input().split()]    r = [int(z) for z in input().split()]    c = [int(z) for z in input().split()]    mod = 10**9 + 7         # Make grid    grid = [['?' for col in range(w+1)] for row in range(h+1)]    def try_set(row, col, target):        if grid[row][col] == '?':            grid[row][col] = target        elif grid[row][col] != target:            raise ValueError             def go():        try:            for row in range(h):                for col in range(r[row]):                    try_set(row, col, 'FULL')                try_set(row, r[row], 'EMPTY')            for col in range(w):                for row in range(c[col]):                    try_set(row, col, 'FULL')                try_set(c[col], col, 'EMPTY')        except ValueError:            return 0        answer = 1        for row in range(h):            for col in range(w):                if grid[row][col] == '?': answer = answer * 2 % mod        return answer            print(go())solve()
