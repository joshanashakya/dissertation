h,w = map(int,input().split())r = list(map(int,input().split()))c = list(map(int,input().split()))mod = 1000000007grid = [["?" for i in range(w+1)]for j in range(h+1)]def try_set(row,col,target):    if grid[row][col]=="?":        grid[row][col] = target    elif grid[row][col]!=target:        raise ValueErrordef go():    try:        for row in range(h):            for col in range(r[row]):                try_set(row,col,"FULL")            try_set(row,r[row],"EMPTY")        for col in range(w):            for row in range(c[col]):                try_set(row,col,"FULL")            try_set(c[col],col,"EMPTY")    except ValueError:        return 0    answer = 1    for i in range(h):        for j in range(w):            if grid[i][j]=="?":                answer  = answer*2%mod    return answerprint(go())
