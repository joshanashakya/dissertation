/* package codechef; // don't place package name! */ import java.util.*;import java.lang.*;import java.io.*; /* Name of the class has to be "Main" only if the class is public. */public class Codechef{	public static void main (String[] args) throws java.lang.Exception	{		Scanner sc = new Scanner(System.in);		PrintWriter out = new PrintWriter(System.out);		int r = sc.nextInt(), c = sc.nextInt();		int arr[][] = new int[r][c];		List<Integer> list = new ArrayList();		boolean ok = true;		for(int i = 0; i<r; i++){		    int a = sc.nextInt();		    list.add(a);		    for(int j = 0; j<=a - 1; j++)arr[i][j] = 1;		    if(a != c)arr[i][a] = 2;		}		long mod = 1000000007;		for(int i = 0; i<c; i++){		    int a = sc.nextInt();		    for(int j = 0; j<=a - 1; j++){		        if(arr[j][i] == 2){		            ok = false;		        }		        arr[j][i] = 1;		    }		    if(a != r){		        if(arr[a][i] == 1){		            ok = false;		        }		        arr[a][i] = 2;		    }		}		long cnt = 1;		for(int i = 0; i<r; i++){		    for(int j = 0; j<c; j++){		        //out.print(arr[i][j] + " ");		        if(arr[i][j] == 0)cnt = cnt * 2 % mod;		    }		    //out.println("");		}		if(ok)out.println(cnt);		else out.println(0);		out.flush();	}}
