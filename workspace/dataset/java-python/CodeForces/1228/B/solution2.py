from sys import stdin,stdoutinput = stdin.readline def main():    #t = int(input())    t=1    for i in range(t):        #n = int(input())        n, m = map(int,input().split())        ai = list(map(int,input().split()))        bi = list(map(int,input().split()))        mod = 10**9+7        table = [[0]*m for i in range(n)]        for i in range(n):            for j in range(ai[i]):                table[i][j] = 1            j = ai[i]            if j < m:                table[i][j] = 2        for i in range(m):            for j in range(bi[i]):                if table[j][i] == 2:                    print(0)                    return                 table[j][i] = 1            j = bi[i]            if j < n:                if table[j][i] == 1:                    print(0)                    return                 table[j][i] = 2        ans = 0        for i in range(n):            for j in range(m):                ans += int(table[i][j] == 0)        print(pow(2,ans,mod))        main()Â 
