import java.util.*; public class questionCF {		public static void main(String[] args) { 		Scanner sc = new Scanner(System.in); 		int n=sc.nextInt(); 		int a[] = new int[n];		ArrayList<Integer> l = new ArrayList<>();		for(int i=0; i<n-1; i++) a[i]=sc.nextInt();				int i=n;		l.add(i);		while(i>1) {			i=a[i-2];  l.add(i);		}				for(i=l.size()-1; i>=0; i--)			System.out.print(l.get(i)+" ");					}}		
